<div class="contacts-container">
    <% @contact_groups.each do |group_details| %>
        <div class="group" style="border-color: <%= group_details[:group].color %>">
            <div class="group-name"><%= group_details[:group].name %></div>
            <% group_details[:contacts].each do |contact| %>
                <div class="contact-card">
                    <div class="full-name">
                        <%= contact.full_name %>
                    </div>
                    <% if contact.birthday %>
                        <div class="birthday">
                            <i class="fa-solid fa-cake-candles"></i><%= contact.birthday.strftime("%b %d, %Y") %>
                            <span class="mini-font">
                                <%= time_distance(Date.today, Date.new(Date.today.year, contact.birthday.month, contact.birthday.day)) %>
                            </span> 
                        </div>
                    <% end %>
                    <div class="new-group">
                        <%= render "group_contacts/form", contact: contact, group_contact: contact.group_contact %>
                    </div>
                    <div class="new-reminder">
                        <%= link_to "setup reminder", new_reminder_path(contact_id: contact) %>
                    </div>
                </div>
            <% end %>
        </div>
    <% end %>
</div>

<style>
.group-name {
    position: absolute;
    background: #f4f4f4;
    top: -14px;
    padding: 0 8px;
}
.contacts-container {
    margin: 16px;
    width: calc(100% - 32px);
    display: flex;
    flex-wrap: wrap;
}
.group {
    position: relative;
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    border: 2px solid;
    border-radius: 4px;
    padding: 8px;
    margin: 8px;
}
.contact-card {
    width: calc(33% - 7px);
    margin: 4px;
}
</style>
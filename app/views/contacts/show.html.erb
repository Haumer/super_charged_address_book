<div class="contact-profile">
    <div class="contact-fields">
        <div class="section-header full-name">
            <%= @contact.full_name %>
        </div>
        <div class="contact-field">
            <div class="contact-field-name">
                Birthday:
            </div>
            <% if @contact.birthday %>
                <div class="contact-birthday contact-field-value">
                    <%= @contact.birthday.strftime("%b %d, %Y") %>
                </div>
            <% end %>
        </div>
        <div class="contact-field">
            <div class="contact-field-name">
                Email:
            </div>
            <div class="contact-email contact-field-value">
                <%= @contact.email %>
            </div>
        </div>
        <div class="contact-field">
            <div class="contact-field-name">
                Phone Number:
            </div>
            <div class="contact-phone-number contact-field-value">
                <%= @contact.phone_number %>
            </div>
        </div>
    </div>
    <div class="contact-profile-reminders">
        <div class="section-header">
            Reminders
        </div>
        Active Reminders
        <div class="active-reminders">
            <% @contact.active_reminders.each do |reminder| %>
                <div class="reminder">
                    <%= link_to reminder_path(reminder, {reminder: {contacted: !reminder.contacted}}), data: {"turbo-method": :patch} do %>
                        <% if reminder.contacted %>
                            <div class="button-success button-connect-right">
                                <i class="fa-solid fa-circle-check"></i>
                            </div>
                        <% else %>
                            <div class="button-secondary button-connect-right button-yellow">
                                <i class="fa-solid fa-clock"></i>
                            </div>
                        <% end %>
                        <div class="button-secondary button-connect-left">
                            <% if reminder.birthday_reminder %>
                                <i class="fa-solid fa-cake-candles"></i>
                            <% end %>
                        <%= reminder.target_date.strftime("%b %d, %Y") %>
                        </div>
                    <% end %>
                    <div class="reminder-interval mini-font">
                        <%= time_distance(Date.today, reminder.target_date) %>
                    </div>
                </div>
            <% end %>
        </div>
        Old Reminders
        <div class="inactive-reminders">
            <% @contact.inactive_reminders.each do |reminder| %>
                <div class="reminder">
                    <%= link_to reminder_path(reminder, {reminder: {contacted: !reminder.contacted}}), data: {"turbo-method": :patch} do %>
                        <% if reminder.contacted %>
                            <div class="button-success button-connect-right">
                                <i class="fa-solid fa-circle-check"></i>
                            </div>
                        <% else %>
                            <div class="button-secondary button-connect-right button-yellow">
                                <i class="fa-solid fa-clock"></i>
                            </div>
                        <% end %>
                        <div class="button-secondary button-connect-left">
                            <% if reminder.birthday_reminder %>
                                <i class="fa-solid fa-cake-candles"></i>
                            <% end %>
                        <%= reminder.target_date.strftime("%b %d, %Y") %>
                        </div>
                    <% end %>
                </div>
            <% end %>
        </div>
    </div>
    <div class="contact-profile-notes">
        <div class="section-header">
            Notes
        </div>
        <div class="notes">
            <% @contact.notes.each do |note| %>
                <div class="note">
                    <div class="note-timestamp-and-content">
                        <div class="note-timestamp">
                            <%= note.created_at.strftime("%b %e, %Y %l:%M %p") %>:
                        </div>
                        <div class="note-content">
                            <%= note.rich_content %>
                        </div>
                    </div>
                    <div class="note-delete">
                        <%= link_to note_path(note), data: { turbo_confirm: "Are you sure you want to delete this note?", "turbo-method": :delete } do %>
                            <i class="fa-light fa-trash"></i>
                        <% end %>
                    </div>
                </div>
            <% end %>
        </div>
        <div class="new-contact-note">
            <%= render "notes/form", contact: @contact, note: Note.new %>
        </div>
    </div>
</div>

<style>
.fa-solid {
    color: white;
}
.contact-profile {
    width: 100%;
    min-height: calc(100vh - 106px);
    background: white;
    padding: 16px;
}
.section-header {
    font-size: 24px;
}
.contact-fields {
    display: flex;
    flex-direction: column;
}
.contact-fields,
.contact-profile-reminders,
.contact-profile-notes {
    margin-bottom: 16px;
}
.contact-fields,
.contact-profile-reminders {
    border-bottom: 1px solid #cfd0d2;
}
.contact-field {
    font-size: 16px;
    height: 64px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid #cfd0d2;
}
.contact-field:last-of-type {
    border-bottom: none;
}
.contact-field-name {
    font-size: 14px;
    width: 120px;
    text-align: right;
    color: #737373;
    text-transform: uppercase;
}
.contact-field-value {
    padding-left: 8px;
}
.active-reminders,
.inactive-reminders {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    margin-bottom: 8px;
}
.active-reminders {
    width: 50%;
}
.reminder {
    display: flex;
    align-items: center;
}
.reminder:first-of-type {
    padding: 0
}
.reminder a {
    display: flex;
    justify-content: space-around;
}
.reminder-interval {
    padding-left: 8px;
}
@media (max-width: 500px) {
    .trix-button-row {
        flex-wrap: wrap !important;
    }
    .active-reminders {
        width: 100%;
    }
}
</style>